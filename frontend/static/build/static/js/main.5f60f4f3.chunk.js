(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{15:function(t,e,n){},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(2),s=n.n(a),c=n(10),i=n.n(c),r=(n(15),n(9)),o=n(5),h=n(3),u=n(4),d=n(1),l=n(7),j=n(6),b=(n(16),n(0)),p="/api/v1/chatapp/chat/",f=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).state={chats:[]},a.addChats=a.addChats.bind(Object(d.a)(a)),a.editChat=a.editChat.bind(Object(d.a)(a)),a.removeChat=a.removeChat.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("".concat(p)).then((function(t){return t.json()})).then((function(e){console.log("response",e),t.setState({chats:e})}),(function(e){t.setState({error:e})}))}},{key:"addChats",value:function(t){var e=Object(o.a)(this.state.chats);e.push(t),this.setState({chats:e})}},{key:"editChat",value:function(t,e,n){var a=Object(o.a)(this.state.chats),s=a.indexOf(t);a[s].text=e,this.setState({chats:a});var c=t.text;console.log("CHATS",{text:c},"ID",n),fetch("".concat(p,"update/").concat(n,"/"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:c})}).then((function(t){if(!t.ok)throw new Error("Bad Post request");return t.json()})).then((function(t){return console.log("Success. Message created!")})).catch((function(t){return console.log("Error:",t)})).finally("I am always going to fire!")}},{key:"removeChat",value:function(t){var e=Object(o.a)(this.state.chats),n=e.indexOf(t);e.splice(n,1),this.setState({chats:e}),fetch("".concat(p,"remove/").concat(t.id),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){if(!t.ok)throw new Error("Bad Post request");return t.json()})).then((function(t){return console.log("Success. Message created!")})).catch((function(t){return console.log("Error:",t)})).finally("I am always going to fire!")}},{key:"render",value:function(){return Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsx)(O,{addChats:this.addChats}),Object(b.jsx)(v,{chats:this.state.chats,editChat:this.editChat,removeChat:this.removeChat})]})}}]),n}(a.Component),O=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).state={text:"",user:""},a.handleInput=a.handleInput.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"handleInput",value:function(t){this.setState(Object(r.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault();var e={text:this.state.text};console.log("chat",e),fetch("".concat(p,"create/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){if(!t.ok)throw new Error("Bad Post request");return t.json()})).then((function(t){return console.log("Success. Message created!")})).catch((function(t){return console.log("Error:",t)})).finally("I am always going to fire!")}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"intro",children:[Object(b.jsx)("p",{className:"introP",children:"Welcome to Chat app"}),Object(b.jsx)("p",{className:"rules",children:" Please add your username and a message! Once both are added, smash that add button. :)"})]}),Object(b.jsx)("div",{className:"form-div",children:Object(b.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,children:[Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",id:"chat-user",name:"user",value:this.state.user,onChange:this.handleInput,placeholder:"Username",required:!0}),Object(b.jsx)("label",{htmlFor:"chat-user"}),Object(b.jsx)("input",{type:"text",id:"chat-text",name:"text",value:this.state.text,onChange:this.handleInput,placeholder:"Message",required:!0}),Object(b.jsx)("label",{htmlFor:"chat-text"}),Object(b.jsx)("button",{type:"submit",children:"Add Chat"})]})})]})}}]),n}(a.Component),m=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).state={isEditing:!1,text:a.props.chat.text},a.handleInputEdit=a.handleInputEdit.bind(Object(d.a)(a)),a.handleEdit=a.handleEdit.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"handleEdit",value:function(t){13===t.keyCode&&(this.props.editChat(this.props.chat,this.state.text,this.props.chat.id),this.setState({isEditing:!1}))}},{key:"handleInputEdit",value:function(t){this.setState(Object(r.a)({},t.target.name,t.target.value))}},{key:"render",value:function(){var t=this,e=this.props.chat;return Object(b.jsx)("li",{className:"chat-item",children:Object(b.jsxs)("div",{className:"chat-div",children:[this.state.isEditing?Object(b.jsx)("input",{type:"text",name:"text",value:this.state.text,onChange:this.handleInputEdit,onKeyUp:this.handleEdit}):Object(b.jsxs)("p",{className:"chat-list-text",children:[" ",e.text," "]}),this.state.isEditing?null:Object(b.jsx)("button",{type:"button",onClick:function(){return t.setState({isEditing:!t.state.isEditing})},children:"Edit"}),Object(b.jsx)("button",{type:"button",onClick:function(){return t.props.removeChat(e)},children:"Delete"})]})})}}]),n}(a.Component);function v(t){var e=t.chats.map((function(e,n){return Object(b.jsx)(m,{chat:e,editChat:t.editChat,removeChat:t.removeChat},n)}));return console.log(t.chats),Object(b.jsxs)("ul",{className:"chat-list",children:[" ",e]})}var x=f,g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),s(t),c(t),i(t)}))};i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.5f60f4f3.chunk.js.map